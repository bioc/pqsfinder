#  GNUMakefile

# Just a snippet to stop executing under other make(1) commands
# that won't understand these lines
ifneq (,)
This makefile requires GNU Make.
endif

BOOSTSRC=${wildcard boost_regex/*.cpp} ${wildcard boost_thread/*.cpp} ${wildcard boost_thread/pthread/*.cpp}
BOOSTOBJS=${BOOSTSRC:.cpp=.o}

BOOSTLIB = libboost.a
USERDIR = ${R_PACKAGE_DIR}/lib${R_ARCH}
USERLIB = ${USERDIR}/${BOOSTLIB}

CXX_STD = CXX11
PKG_LIBS = "${USERLIB}" #-lprofiler
# put CXX11FLAGS += -O0... into ~/.R/Makevars to override default gcc flags

.PHONY: all clean 

all: $(SHLIB) 

$(SHLIB): $(USERLIB)

$(USERLIB): ${BOOSTOBJS}
	mkdir -p "${USERDIR}"
	$(AR) rs "${USERLIB}" ${BOOSTOBJS}

clean:
	rm -f $(BOOSTOBJS) $(SHLIB)
